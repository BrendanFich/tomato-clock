{"version":3,"sources":["static/logo.png","redux/reducers/index.ts","redux/reducers/todos.ts","redux/actionTypes.ts","redux/reducers/tomatoes.ts","redux/store.ts","redux/actions/todos.ts","config/history.ts","config/axios.ts","components/Tomatoes/CountDown.tsx","components/Todos/TodoInput.tsx","components/Todos/TodoItem.tsx","components/Todos/Todos.tsx","components/Tomatoes/TomatoAction.tsx","components/Tomatoes/TomatoList.tsx","components/Tomatoes/Tomatoes.tsx","redux/actions/tomatoes.ts","components/Statistics/Polygon.tsx","components/Statistics/TodoHistory/TodoHistoyTodoItem.tsx","components/Statistics/TodoHistory/TodoHistory.tsx","components/Statistics/Statistics.tsx","components/Home/Home.tsx","components/Login/Login.tsx","components/SignUp/SignUp.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","__webpack_require__","p","combineReducers","todos","state","arguments","length","undefined","action","type","payload","concat","Object","toConsumableArray","console","log","map","t","id","assign","editing","tomatoes","store","createStore","rootReducer","updateTodos","publicUrl","history","createBrowserHistory","basename","instance","axios","create","baseURL","headers","t-app-id","t-app-secret","interceptors","request","use","config","xToken","localStorage","getItem","error","Promise","reject","response","setItem","status","push","timeId","initialState","description","TodoInput","postTodo","_callee","regenerator_default","a","wrap","_context","prev","next","post","_this","sent","props","addTodo","data","resource","t0","Error","setState","stop","onKeyUp","e","key","_this2","this","suffix","react","icon","onClick","className","input","placeholder","onChange","target","value","React","mapDispatchToProps","connect","ownProps","objectSpread","TodoItem","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","editText","_ref","asyncToGenerator","mark","params","completed","completed_at","Date","put","_x","apply","Editing","react_default","createElement","theme","deleted","Text","onDoubleClick","editTodos","toItemClass","classNames","es_checkbox","checked","Component","Panel","collapse","Todos","Todos_TodoInput","noCompletedTodos","components_Todos_TodoItem","defaultActiveKey","header","CompletedTodos","filter","noDeletedTodos","CountDown","countDown","timer","setInterval","time","document","title","onFinish","clearInterval","percent","duration","style","width","min","Math","floor","sec","confirm","modal","TomatoAction","forceUpdate","abortTomato","updateTomato","aborted","_ref2","_callee2","_context2","unfinishedTomato","showConfirm","onOk","okText","cancelText","ended_at","html","es_button","startTomato","started_at","parse","timeNow","getTime","components_Tomatoes_CountDown","TomatoItem","format","TomatoList","list","dates","d","finishedTomatoes","TomatoList_TomatoItem","keys","sort","b","splice","Tomatoes","addTomato","components_Tomatoes_TomatoAction","components_Tomatoes_TomatoList","_","groupBy","tomato","Polygon","points","firstDay","lastY","range","finishedCount","pointArr","date","x","y","totalFinishedCount","join","fill","stroke","strokeWidth","TodoHistoyTodoItem","formatText","itemType","updated_at","created_at","TabPane","tabs","TodoHistory","dateStr","replace","getDay","todoList","finishedDates","getWeekday","dailyFinishedTodos","todo","TodoHistory_TodoHistoyTodoItem","deletedList","deletedTodos","tab","finishedTodos","Statistics","components_Statistics_Polygon","dailyTodos","Statistics_TodoHistory_TodoHistory","menu","Item","user","account","Home","getMe","get","getTodos","resources","initTodos","getTomatoes","_callee3","_context3","initTomatoes","src","logo","alt","dropdown","overlay","marginLeft","components_Tomatoes_Tomatoes","components_Todos_Todos","components_Statistics_Statistics","password","Login","newState","submit","_this$state","errors","_this$state2","prefix","color","Password","react_router_dom","to","passwordConfirmation","SignUp","password_confirmation","App","react_router","exact","path","component","Boolean","window","location","hostname","match","ReactDOM","render","es","src_App_0","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.6dd21f01.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.01fc1791.png\";","import {combineReducers} from 'redux'\r\nimport todos from './todos'\r\nimport tomatoes from './tomatoes'\r\n\r\n\r\nexport default combineReducers({todos, tomatoes})\r\n","import { ADD_TODO, INIT_TODOS, UPDATE_TODOS, EDIT_TODOS } from '../actionTypes'\r\n\r\n\r\nexport default (state: any[] = [], action: any): any => {\r\n  switch (action.type) {\r\n    case ADD_TODO:\r\n      return [action.payload,...state ]\r\n\r\n    case INIT_TODOS:\r\n      return action.payload\r\n\r\n    case UPDATE_TODOS:\r\n        console.log(11);\r\n      return state.map(t => {\r\n        if (action.payload.id === t.id) {\r\n          return action.payload\r\n        } else {\r\n          return t\r\n        }\r\n      })\r\n    case EDIT_TODOS:\r\n      return state.map((t) => {\r\n        if (action.payload === t.id) {\r\n          return Object.assign({}, t, { editing: true })\r\n        } else {\r\n          return Object.assign({}, t, { editing: false })\r\n        }\r\n      })\r\n\r\n    default: return state\r\n  }\r\n\r\n}\r\n","export const  ADD_TODO = 'ADD_TODO'\r\nexport const  INIT_TODOS = 'INIT_TODOS'\r\nexport const  UPDATE_TODOS = 'UPDATE_TODOS'\r\nexport const  EDIT_TODOS = 'EDIT_TODOS'\r\n\r\nexport const  ADD_TOMATO = 'ADD_TOMATO'\r\nexport const  INIT_TOMATOES = 'INIT_TOMATOES'\r\nexport const  UPDATE_TOMATO = 'UPDATE_TOMATO'","import { ADD_TOMATO, INIT_TOMATOES, UPDATE_TOMATO } from '../actionTypes'\r\n\r\nexport default (state: any[] = [], action: any): any => {\r\n  switch (action.type) {\r\n    case ADD_TOMATO:\r\n      return [action.payload, ...state]\r\n\r\n    case INIT_TOMATOES:\r\n      return [...action.payload]\r\n      \r\n    case UPDATE_TOMATO:\r\n      return state.map(t => {\r\n        if (action.payload.id === t.id) {\r\n          return action.payload\r\n        } else {\r\n          return t\r\n        }\r\n      })\r\n    default: return state\r\n  }\r\n\r\n}\r\n","import { createStore } from 'redux'\r\nimport rootReducer from './reducers'\r\n\r\nconst store = createStore(rootReducer)\r\n\r\nexport default store\r\n","import {ADD_TODO, INIT_TODOS, UPDATE_TODOS, EDIT_TODOS} from 'redux/actionTypes'\r\n\r\nexport const addTodo = (payload:any) => {\r\n  return {\r\n    type: ADD_TODO,\r\n    payload\r\n  }\r\n}\r\n\r\nexport const initTodos = (payload:any[]) => {\r\n  return {\r\n    type: INIT_TODOS,\r\n    payload\r\n  }\r\n}\r\n\r\nexport const updateTodos = (payload:any) => {\r\n  return {\r\n    type: UPDATE_TODOS,\r\n    payload\r\n  }\r\n}\r\n\r\nexport const editTodos = (payload:number) => {\r\n  return {\r\n    type: EDIT_TODOS,\r\n    payload\r\n  }\r\n}","import {createBrowserHistory} from 'history'\r\n\r\nconst ENV = process.env.NODE_ENV;\r\n\r\nlet publicUrl: string = '';\r\n\r\nif(ENV === 'development'){\r\n  publicUrl ='/';\r\n}else if(ENV === 'production'){\r\n  publicUrl = '/tomato-clock'\r\n}\r\n\r\nconst history = createBrowserHistory({\r\n  basename: publicUrl\r\n});\r\n\r\nexport default history;","import axios from 'axios'\r\nimport history from './history'\r\n\r\nconst appID = 'DyAShocuh1yeoTr5J7STq9Nf'\r\nconst appSecret = 'BRLL72sYYcJ4L75BMWQ2zGX8'\r\n\r\nconst instance = axios.create({\r\n  baseURL: 'https://gp-server.hunger-valley.com/',\r\n  headers: {\r\n    't-app-id': appID,\r\n    't-app-secret': appSecret\r\n  }\r\n});\r\n\r\n\r\n// Add a request interceptor\r\ninstance.interceptors.request.use(function (config) {\r\n  // Do something before request is sent\r\n\r\n  const xToken = localStorage.getItem('x-token')\r\n  if (xToken) {\r\n    config.headers['Authorization'] = `Bearer ${xToken}`\r\n  }\r\n  return config;\r\n}, function (error) {\r\n  // Do something with request error\r\n  console.error(error)\r\n  return Promise.reject(error);\r\n});\r\n\r\n// Add a response interceptor\r\ninstance.interceptors.response.use(function (response) {\r\n  if (response.headers['x-token']) {\r\n    localStorage.setItem('x-token', response.headers['x-token'])\r\n  }\r\n  // Do something with response data\r\n  return response;\r\n}, function (error) {\r\n  if(error.response.status === 401){\r\n    console.log('重定向');\r\n    history.push('/login')\r\n  }\r\n  // Do something with response error\r\n  return Promise.reject(error); //有什么用？\r\n});\r\n\r\nexport default instance","import React, { Component } from 'react';\r\nimport './CountDown.scss'\r\n\r\ninterface Props {\r\n  timer: number;\r\n  duration: number;\r\n  onFinish: () => void\r\n}\r\ninterface State {\r\n  countDown: number\r\n  \r\n}\r\nlet timeId:NodeJS.Timeout\r\n\r\nclass CountDown extends Component<Props, State> {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state ={\r\n      countDown : this.props.timer\r\n    }\r\n  }\r\n  \r\n  componentDidMount(){\r\n    timeId = setInterval(()=>{\r\n      const time = this.state.countDown\r\n      this.setState({countDown :time - 1000})\r\n      document.title = `${this.countDown} 番茄钟`\r\n      if(time < 1000){\r\n        document.title = `番茄钟`\r\n        this.props.onFinish() //告诉父组件 完成倒计时\r\n        clearInterval(timeId)\r\n      }\r\n    }, 1000)\r\n  }\r\n\r\n  get countDown(){\r\n    const min = Math.floor(this.state.countDown / 1000 / 60)\r\n    const sec = Math.floor(this.state.countDown/ 1000 % 60) \r\n    return (min > 9 ? min : '0' + min) + ' : ' + (sec > 9 ? sec : '0' + sec)\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    clearInterval(timeId)\r\n  }\r\n\r\n  render() {\r\n    const percent = 1 - this.state.countDown/this.props.duration\r\n    return (\r\n      <div className=\"CountDown\" id=\"CountDown\">\r\n        <span>{this.countDown}</span>\r\n        <div className=\"process\" style={{width: `${percent*100}%`}}/>\r\n        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CountDown;","import * as React from 'react';\r\nimport {Input, Icon} from 'antd'\r\nimport {connect} from 'react-redux'\r\nimport {addTodo} from 'redux/actions/todos'\r\nimport axios from '../../config/axios'\r\n\r\nconst initialState = {\r\n  description: ''\r\n}\r\ninterface Props {\r\n  addTodo: (payload:any) => any;\r\n}\r\ntype State = Readonly<typeof initialState>\r\nclass TodoInput extends React.Component <Props,State>{\r\n  readonly state : State = initialState\r\n\r\n  // addTodo = ()=>{\r\n  //   this.props.addTodo({description: this.state.description})\r\n  //   this.setState({description: \"\"})\r\n  // }\r\n  postTodo = async () => {\r\n    try {\r\n      const response = await axios.post('todos', {description: this.state.description})\r\n      this.props.addTodo(response.data.resource)\r\n      \r\n    } catch (e) {\r\n      throw new Error(e)\r\n    }\r\n    this.setState({description: \"\"})\r\n  } \r\n  onKeyUp = (e)=>{\r\n    if(e.key === 'Enter' && this.state.description !== ''){\r\n      this.postTodo()\r\n    }\r\n  }\r\n  render() {\r\n    \r\n    const {description} = this.state\r\n    const suffix = description ? <Icon type=\"enter\" onClick={this.postTodo} /> : <span/>//预设一个<span/>防止失去焦点\r\n    return (\r\n      <div className=\"TodoInput\" id=\"TodoInput\">\r\n        <Input \r\n        placeholder=\"添加新任务\" \r\n        suffix={suffix}\r\n        onChange={(e)=>this.setState({description: e.target.value})} \r\n        onKeyUp={this.onKeyUp}\r\n        value={description}\r\n        />\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n  ...ownProps\r\n})\r\n\r\nconst mapDispatchToProps ={\r\n  addTodo\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TodoInput);\r\n","import React, { Component } from 'react';\r\nimport { Checkbox, Icon } from 'antd';\r\nimport { connect } from 'react-redux'\r\nimport '../Todos/TodoItem.scss'\r\nimport classNames from 'classnames'\r\nimport { editTodos, updateTodos } from 'redux/actions/todos'\r\nimport axios from '../../config/axios'\r\n\r\ninterface Props {\r\n  id: number,\r\n  description: string,\r\n  completed: boolean,\r\n  editing: boolean,\r\n  updateTodos: (payload:any) => any,\r\n  editTodos: (payload:number) => any\r\n}\r\ninterface State { editText: string }\r\nclass TodoItem extends Component<Props, State>{\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      editText: this.props.description\r\n    }\r\n  }\r\n  onKeyUp = (e) => {\r\n    if (e.key === 'Enter' && this.state.editText !== '') {\r\n      this.updateTodos( { description: this.state.editText })\r\n    }\r\n  }\r\n  updateTodos = async ( params: any) => {\r\n    if(params.completed){\r\n      params.completed_at = new Date()\r\n    }\r\n    try {\r\n      const response = await axios.put(`todos/${this.props.id}`, params)\r\n      this.props.updateTodos(response.data.resource)\r\n    } catch (e) {\r\n      throw new Error(e)\r\n    }\r\n  }\r\n  render() {\r\n    const Editing = (\r\n      <div className=\"editing\">\r\n        <input type=\"text\" value={this.state.editText}\r\n          onChange={e => this.setState({ editText: e.target.value })}\r\n          onKeyUp={this.onKeyUp}\r\n        />\r\n        <Icon className=\"icon\" type=\"enter\" onClick={() =>\r\n          this.updateTodos({ description: this.state.editText })\r\n        } />\r\n        <Icon className=\"icon\" type=\"delete\" theme=\"filled\" onClick={\r\n          e => this.updateTodos({ deleted: true })\r\n        } />\r\n      </div>\r\n    )\r\n    const Text = <span onDoubleClick={\r\n      () => this.props.editTodos(this.props.id)}\r\n      className=\"text\">\r\n      {this.props.description}\r\n    </span>\r\n    const toItemClass = classNames({\r\n      TodoItem: true,\r\n      editing: this.props.editing,\r\n      completed: this.props.completed\r\n    })\r\n    return (\r\n      <div className={toItemClass} id=\"TodoItem\">\r\n        <Checkbox\r\n          onChange={e => this.updateTodos(\r\n            { completed: e.target.checked })}\r\n          checked={this.props.completed} />\r\n        {\r\n          this.props.editing ? Editing : Text\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = (state, ownProps) => ({\r\n  ...ownProps\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n  editTodos,\r\n  updateTodos\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TodoItem);\r\n","import * as React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport './Todos.scss'\r\nimport TodoInput from './TodoInput';\r\nimport TodoItem from './TodoItem';\r\nimport { Collapse } from 'antd';\r\n\r\nconst Panel = Collapse.Panel;\r\n\r\nclass Todos extends React.Component<any>{\r\n\r\n  get noDeletedTodos() {\r\n    return this.props.todos.filter(t => !t.deleted)\r\n  }\r\n  get noCompletedTodos() {\r\n    return this.noDeletedTodos.filter(t => !t.completed)\r\n  }\r\n  get CompletedTodos() {\r\n    return this.noDeletedTodos.filter(t => t.completed)\r\n  }\r\n\r\n\r\n\r\n  public render() {\r\n    return (\r\n      <div className=\"Todos\" id=\"Todos\">\r\n        <TodoInput />\r\n        <div className=\"todoLists\" >\r\n          {\r\n            this.noCompletedTodos.map((t) =>\r\n              <TodoItem key={t.id} {...t}//把t的所有属性传给TodoItem\r\n              />)\r\n          }\r\n          <Collapse defaultActiveKey={[]} className=\"showCompleted\">\r\n            <Panel header=\"最近完成的任务\" key=\"1\">\r\n              {\r\n                this.CompletedTodos.map((t) =>\r\n                  <TodoItem key={t.id} {...t}\r\n                  />)\r\n              }\r\n            </Panel>\r\n          </Collapse>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({ //state是store里的reducer里的state\r\n  todos: state.todos,\r\n  ...ownProps\r\n})\r\n\r\nexport default connect(mapStateToProps)(Todos);","import React, { Component } from 'react';\r\nimport { Button, Input, Icon, Modal } from 'antd'\r\nimport axios from 'config/axios'\r\nimport CountDown from './CountDown'\r\nimport './TomatoAction.scss'\r\n\r\ninterface Props {\r\n  startTomato: () => void;\r\n  unfinishedTomato: any\r\n  updateTomato: (payload: any) => any\r\n}\r\n\r\ninterface State {\r\n  description: string\r\n}\r\n\r\nconst confirm = Modal.confirm;\r\n\r\nclass TomatoAction extends Component<Props, State> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      description: ''\r\n    }\r\n  }\r\n\r\n  onKeyUp(e) {\r\n    if (e.key === 'Enter' && this.state.description !== '') {\r\n      this.updateTomato({\r\n        description: this.state.description, \r\n        ended_at: new Date()\r\n      })\r\n        this.setState({ description: '' })\r\n    }\r\n  }\r\n\r\n\r\n  onFinish = () => {\r\n    this.forceUpdate()\r\n  }\r\n\r\n  abortTomato = async () => {\r\n    this.updateTomato({aborted: true})\r\n    document.title = '番茄钟'\r\n  }\r\n\r\n  updateTomato = async (params:any) => {\r\n    try {\r\n      const response = await axios.put(\r\n        `tomatoes/${this.props.unfinishedTomato.id}`, params)\r\n      this.props.updateTomato(response.data.resource)\r\n    } catch (e) {\r\n      throw new Error(e)\r\n    }\r\n  }\r\n\r\n  showConfirm = () =>{\r\n    confirm({\r\n      title: '您目前正在一个番茄工作时间中，要放弃这个番茄吗？',\r\n      onOk : ()=>{\r\n        this.abortTomato()\r\n      },\r\n      okText: '确定',\r\n      cancelText: '取消'\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let html\r\n\r\n    if (this.props.unfinishedTomato === undefined) {\r\n      html = <Button className=\"startTomatoButton\"\r\n        onClick={this.props.startTomato}\r\n      >开始番茄</Button>\r\n    } else {\r\n      const started_at = Date.parse(this.props.unfinishedTomato.started_at)\r\n      const duration = this.props.unfinishedTomato.duration\r\n      const timeNow = new Date().getTime()\r\n      if (timeNow - started_at > duration) {\r\n        html = <div className=\"countDownWrapper\">\r\n          <Input\r\n            value={this.state.description}\r\n            placeholder=\"请输入你刚刚完成的任务\"\r\n            onChange={e => this.setState({ description: e.target.value })}\r\n            onKeyUp={e => this.onKeyUp(e)}\r\n          />\r\n          <Icon className=\"abort\" type=\"close-circle\" onClick={this.showConfirm}/>\r\n        </div>\r\n\r\n      } else if (timeNow - started_at < duration) {\r\n        const timer = duration - (timeNow - started_at)\r\n        html = (\r\n          <div className=\"countDownWrapper\">\r\n            <CountDown timer={timer} onFinish={this.onFinish} duration={duration}/>\r\n            <Icon className=\"abort\" type=\"close-circle\" onClick={this.showConfirm}/>\r\n          </div>\r\n        )\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className=\"TomatoAction\" id=\"TomatoAction\">\r\n        {html}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TomatoAction;","import React, { Component } from 'react';\r\nimport { format } from \"date-fns\";\r\nimport \"./TomatoList.scss\";\r\n\r\ninterface Props {\r\n  finishedTomatoes: any\r\n}\r\n\r\nconst TomatoItem = function (props) {\r\n  return (\r\n    <div className=\"TomatoItem\">\r\n      <span className=\"timeRange\">{format(props.started_at, 'HH : mm')} - {format(props.ended_at, 'HH : mm')}</span>\r\n      <span className=\"description\">{props.description}</span>\r\n    </div>\r\n  )\r\n}\r\n\r\nclass TomatoList extends Component<Props> {\r\n\r\n  get dates() {\r\n    const dates = Object.keys(this.props.finishedTomatoes)\r\n    return dates.sort((a, b) => Date.parse(b) - Date.parse(a)).splice(0, 3)\r\n  }\r\n\r\n  render() {\r\n    const list = this.dates.map(d => {\r\n      const tomatoes = this.props.finishedTomatoes[d]\r\n      return (\r\n        <div key={d} className=\"dailyTomatoes\">\r\n          <div className=\"title\">\r\n            <span className=\"dateTime\">{format(d, 'M月DD日')}</span>\r\n            <span className=\"finishedCount\">完成了{tomatoes.length}个番茄</span>\r\n          </div>\r\n          {\r\n            tomatoes.map(t => <TomatoItem key={t.id} {...t} />)\r\n          }\r\n        </div>\r\n      )\r\n    })\r\n\r\n    return (\r\n      <div className=\"TomatoList\" id=\"TomatoList\">\r\n        {list}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TomatoList;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport './Tomatoes.scss'\r\nimport TomatoAction from './TomatoAction'\r\nimport TomatoList from './TomatoList'\r\nimport { addTomato, updateTomato } from 'redux/actions/tomatoes';\r\nimport axios from '../../config/axios'\r\nimport _ from 'lodash' \r\nimport { format } from \"date-fns\";\r\n\r\ninterface Props {\r\n  tomatoes: any[]\r\n  addTomato: (payload: any) => any\r\n  updateTomato: (payload: any) => any\r\n}\r\n\r\nclass Tomatoes extends Component<Props> {\r\n\r\n  get unfinishedTomato() {\r\n    return this.props.tomatoes.filter(t => !t.description && !t.ended_at && !t.aborted)[0]\r\n  }\r\n\r\n  get finishedTomatoes() {\r\n    const finishedTomatoes = this.props.tomatoes.filter(t => t.description && t.ended_at && !t.aborted)\r\n    const obj = _.groupBy(finishedTomatoes, (tomato)=>{ //lodasha\r\n      return format(tomato.started_at, 'YYYY-MM-D')\r\n    })\r\n    return obj  //返回一个以日期为keys，当天完成的tomatoes（数组）为values的对象\r\n  }\r\n\r\n  startTomato = async () => {\r\n    try {\r\n      const response = await axios.post('tomatoes', { duration: 10 * 1000 })\r\n      this.props.addTomato(response.data.resource)\r\n    } catch (e) {\r\n      throw new Error(e)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Tomatoes\" id=\"Tomatoes\">\r\n        <TomatoAction \r\n        startTomato={this.startTomato} \r\n        unfinishedTomato={this.unfinishedTomato} \r\n        updateTomato={this.props.updateTomato}\r\n        />\r\n        <TomatoList finishedTomatoes={this.finishedTomatoes} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n  tomatoes: state.tomatoes,\r\n  ...ownProps\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n  addTomato,\r\n  updateTomato\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps, mapDispatchToProps\r\n)(Tomatoes);","import {ADD_TOMATO, INIT_TOMATOES, UPDATE_TOMATO} from 'redux/actionTypes'\r\n\r\nexport const addTomato = (payload:any) => {\r\n  return {\r\n    type: ADD_TOMATO,\r\n    payload\r\n  }\r\n}\r\n\r\nexport const initTomatoes = (payload:any[]) => {\r\n  return {\r\n    type: INIT_TOMATOES,\r\n    payload\r\n  }\r\n}\r\n\r\nexport const updateTomato = (payload:any) => {\r\n  return {\r\n    type: UPDATE_TOMATO,\r\n    payload\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport './Polygon.scss'\r\n\r\ninterface Props {\r\n  data: any\r\n  totalFinishedCount: any\r\n}\r\n\r\ninterface State {\r\n  points: string\r\n}\r\n\r\nclass Polygon extends Component<Props, State> {\r\n\r\n  points = () => {\r\n    const dates = Object.keys(this.props.data).sort(\r\n      (a, b) => { return Date.parse(a) - Date.parse(b) })\r\n\r\n    const firstDay = dates[0]\r\n    if (firstDay) {\r\n      const range = new Date().getTime() - Date.parse(firstDay)\r\n      let finishedCount = 0\r\n      let lastY\r\n      const pointArr = dates.map(date => {\r\n        const x = (Date.parse(date) - Date.parse(firstDay)) / range * 299\r\n        finishedCount += this.props.data[date].length\r\n        const y = (1 - finishedCount / this.props.totalFinishedCount) * 100\r\n        lastY = y\r\n        return `${x},${y}`\r\n      })\r\n      return ['0,100', ...pointArr, `299,${lastY}`, '299,100'].join(' ')\r\n    } else {\r\n      return \"0,60 240,60\"\r\n    }\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Polygon\" id=\"Polygon\">\r\n        <svg>\r\n          <polygon\r\n            fill=\"rgba(233, 82, 87, 0.2)\"\r\n            stroke=\"rgba(233, 82, 87, 0.8)\"\r\n            strokeWidth=\"1\"\r\n            points={this.points()}\r\n          />\r\n        </svg>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Polygon;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { format } from 'date-fns';\r\nimport './TodoHistoryTodoItem.scss'\r\nimport { updateTodos } from 'redux/actions/todos'\r\nimport axios from 'config/axios'\r\n\r\ninterface Props {\r\n  id: number\r\n  updated_at: any\r\n  created_at: any\r\n  description: string\r\n  itemType: string\r\n  completed: boolean\r\n  deleted: boolean\r\n  updateTodos: (payload: any) => any\r\n}\r\n\r\nclass TodoHistoyTodoItem extends Component<Props> {\r\n\r\n  updateTodos = async (params: any) => {\r\n    try {\r\n      const response = await axios.put(`todos/${this.props.id}`, params)\r\n      this.props.updateTodos(response.data.resource)\r\n      console.log(response.data.resource);\r\n    } catch (e) {\r\n      throw new Error(e)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let formatText, action, time\r\n    if (this.props.itemType === 'finished') {\r\n      time = this.props.updated_at\r\n      formatText = \"HH:mm\"\r\n      action = (\r\n        <div className=\"action\">\r\n          <span onClick={() => this.updateTodos({ completed: false })}>恢复</span>\r\n          <span onClick={() => this.updateTodos({ deleted: true })}>删除</span>\r\n        </div>\r\n      )\r\n    } else if (this.props.itemType === 'deleted') {\r\n      time = this.props.created_at\r\n      formatText = \"YYYY-MM-D\"\r\n      action = (\r\n        <div className=\"action\">\r\n          <span onClick={() => this.updateTodos({ deleted: false })}>恢复</span>\r\n        </div>\r\n      )\r\n    }\r\n    return (\r\n      <div className=\"TodoHistoyTodoItem\" id=\"TodoHistoyTodoItem\">\r\n        <span className=\"timeRange\">{format(time, formatText)}</span>\r\n        <span className=\"description\">{this.props.description}</span>\r\n        <div>\r\n          {action}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    ...ownProps\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n  updateTodos\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps, mapDispatchToProps\r\n)(TodoHistoyTodoItem);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { format } from 'date-fns';\r\nimport { Tabs } from 'antd'\r\nimport _ from 'lodash'\r\nimport TodoHistoyTodoItem from './TodoHistoyTodoItem'\r\nimport './TodoHistory.scss'\r\n\r\nconst TabPane = Tabs.TabPane;\r\n\r\ninterface Props {\r\n  todos: any[]\r\n}\r\n\r\nclass TodoHistory extends Component<Props> {\r\n\r\n  get finishedTodos() {\r\n    return this.props.todos.filter(t => t.completed && !t.deleted)\r\n  }\r\n\r\n  get dailyFinishedTodos() {\r\n    return _.groupBy(this.finishedTodos, (todo) => format(todo.updated_at, 'YYYY-MM-D'))\r\n  }\r\n\r\n  get finishedDates() {\r\n    return Object.keys(this.dailyFinishedTodos).sort((a, b) => Date.parse(b) - Date.parse(a))\r\n  }\r\n\r\n  get deletedTodos() {\r\n    return this.props.todos.filter(t => t.deleted)\r\n  }\r\n  getWeekday(date){\r\n    const weekDay = [\"周日\", \"周一\", \"周二\", \"周三\", \"周四\", \"周五\", \"周六\"];\r\n    const dateStr = date;\r\n    const myDate = new Date(Date.parse(dateStr.replace(/-/g, \"/\")));\r\n    return weekDay[myDate.getDay()]\r\n  }\r\n\r\n  render() {\r\n    const todoList = this.finishedDates.map(date => {\r\n      return (\r\n        <div key={date} className=\"dailyHistory\">\r\n          <div className=\"title\">\r\n            <span className=\"dateTime\">{date}</span>\r\n            <span className=\"weeklyDate\">{this.getWeekday(date)}</span>\r\n            <span className=\"count\">完成了{this.dailyFinishedTodos[date].length}个任务</span>\r\n          </div>\r\n          <div className=\"items\">\r\n            {\r\n              this.dailyFinishedTodos[date].map(todo =>\r\n                <TodoHistoyTodoItem key={todo.id} {...todo} itemType=\"finished\" />)\r\n            }\r\n          </div>\r\n        </div>)\r\n    })\r\n    const deletedList = this.deletedTodos.map(todo => {\r\n      return <TodoHistoyTodoItem key={todo.id} {...todo} itemType=\"deleted\" />\r\n    })\r\n    return (\r\n      <div className=\"TodoHistory\" id=\"TodoHistory\">\r\n        <Tabs defaultActiveKey=\"1\">\r\n          <TabPane tab=\"已完成的任务\" key=\"1\">\r\n            {todoList}\r\n          </TabPane>\r\n          <TabPane tab=\"已删除的任务\" key=\"2\">\r\n            {deletedList}\r\n          </TabPane>\r\n        </Tabs>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n  todos: state.todos,\r\n  ...ownProps\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n)(TodoHistory);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport './Statistics.scss'\r\nimport Polygon from './Polygon'\r\nimport TodoHistory from './TodoHistory/TodoHistory'\r\nimport _ from 'lodash'\r\nimport { format } from 'date-fns';\r\n\r\ninterface Props {\r\n  todos: any[]\r\n}\r\n\r\nclass Statistics extends Component<Props> {\r\n\r\n  get finishedTodos() {\r\n    return this.props.todos.filter(t => t.completed && !t.deleted)\r\n  }\r\n\r\n  get dailyTodos() {\r\n    return _.groupBy(this.finishedTodos, (todo) => {\r\n      return format(todo.updated_at, 'YYYY-MM-D')\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Statistics\" id=\"Statistics\">\r\n        <ul>\r\n          <li>\r\n            <div className=\"information\">\r\n              <p>统计</p>\r\n              <p>此功能</p>\r\n              <p>施工中</p>\r\n            </div>\r\n            \r\n          </li>\r\n          <li>\r\n            <div className=\"information\">\r\n              <p>番茄历史</p>\r\n              <p>此功能</p>\r\n              <p>施工中</p>\r\n            </div>\r\n            \r\n          </li>\r\n          <li className=\"active\">\r\n            <div className=\"information\">\r\n              <p>任务历史</p>\r\n              <p>累计完成任务</p>\r\n              <p>{this.finishedTodos.length}</p>\r\n            </div>\r\n            <Polygon data={this.dailyTodos} totalFinishedCount={this.finishedTodos.length} />\r\n          </li>\r\n        </ul>\r\n        <TodoHistory />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n  todos: state.todos,\r\n  ...ownProps\r\n})\r\n\r\nexport default connect(mapStateToProps)(Statistics);","import * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Dropdown, Icon, Menu } from 'antd'\r\nimport { initTodos } from 'redux/actions/todos'\r\nimport { initTomatoes } from 'redux/actions/tomatoes';\r\nimport Todos from '../Todos/Todos'\r\nimport Tomatoes from '../Tomatoes/Tomatoes'\r\nimport Statistics from '../Statistics/Statistics'\r\nimport axios from '../../config/axios'\r\nimport history from '../../config/history'\r\nimport './Home.scss'\r\nimport logo from '../../static/logo.png'\r\n\r\nconst logout = () => {\r\n  localStorage.setItem('x-token', '')\r\n  history.push('/login')\r\n}\r\nconst menu = (\r\n  <Menu>\r\n    <Menu.Item key=\"1\" onClick={logout}><Icon type=\"user\" />登出</Menu.Item>\r\n  </Menu>\r\n);\r\n\r\nconst initialState = {\r\n  user: { 'account': \"\" }\r\n}\r\n\r\ntype State = Readonly<typeof initialState>\r\n\r\nclass Home extends React.Component<any, State>{\r\n  readonly state: State = initialState\r\n\r\n  async componentWillMount() {\r\n    await this.getMe()\r\n    await this.getTodos()\r\n    await this.getTomatoes()\r\n  }\r\n\r\n  getMe = async () => {\r\n    const response = await axios.get('me')\r\n    this.setState({ user: response.data })\r\n  }\r\n\r\n  getTodos = async () => {\r\n    try {\r\n      const response = await axios.get('todos')\r\n      const todos = response.data.resources.map(t => Object.assign({}, t, { editing: false }))\r\n      this.props.initTodos(todos)\r\n    } catch (e) {\r\n      throw new Error(e)\r\n    }\r\n  }\r\n\r\n  getTomatoes = async () => {\r\n    try {\r\n      const response = await axios.get('tomatoes')\r\n      this.props.initTomatoes(response.data.resources)\r\n\r\n    } catch (e) {\r\n      throw new Error(e)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Home\" id=\"Home\">\r\n        <header>\r\n          <div className=\"logo\">\r\n            <img src={logo} alt=\"\"/>\r\n            <span>番茄土豆</span>\r\n          </div>\r\n          <Dropdown overlay={menu} className=\"Dropdown\">\r\n            <span>{this.state.user.account}<Icon type=\"down\" style={{ marginLeft: 8 }} /></span>\r\n          </Dropdown>\r\n        </header>\r\n        <main>\r\n          <Tomatoes />\r\n          <Todos />\r\n        </main>\r\n        <Statistics />\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n  todos: state.todos,\r\n  ...ownProps\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n  initTodos,\r\n  initTomatoes\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);","import * as React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Input, Icon, Button } from 'antd';\r\nimport axios from '../../config/axios'\r\nimport './Login.scss'\r\n\r\ninterface axios { }\r\nconst initialState = {\r\n  account: '',\r\n  password: ''\r\n}\r\ntype State = Readonly<typeof initialState>;\r\n\r\nclass Login extends React.Component<any, State>{\r\n  readonly state: State = initialState;\r\n\r\n  onChange = (key: keyof State, value: string) => {\r\n    const newState = {}\r\n    newState[key] = value\r\n    this.setState(newState)\r\n  }\r\n  \r\n  submit = async () => {\r\n    const { account, password } = this.state\r\n    try {\r\n      await axios.post('sign_in/user', {\r\n        account,\r\n        password\r\n      })\r\n      console.log('成功！');\r\n      this.props.history.push('/')\r\n    } catch (e) {\r\n      console.log(e.response.data.errors)\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    const { account, password } = this.state\r\n    return (\r\n      <div className=\"Login\" id=\"Login\">\r\n        <h1>番茄土豆登录</h1>\r\n        <br />\r\n        <Input\r\n          placeholder=\"请输入您的用户名\"\r\n          prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n          value={account}\r\n          onChange={(e) => { this.onChange('account', e.target.value) }}\r\n        />\r\n        <Input.Password value={password} placeholder=\"请输入您的密码\" onChange={(e) => { this.onChange('password', e.target.value) }} />\r\n        <Button type=\"primary\" className=\"loginButton\" onClick={this.submit}>登录</Button>\r\n        <p>如果你没有账号，请立即<Link to=\"/signUp\">注册</Link></p>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Login;","import * as React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Input, Icon, Button } from 'antd';\r\nimport axios from '../../config/axios'\r\nimport './SignUp.scss'\r\n\r\ninterface axios { }\r\nconst initialState = {\r\n  account: '',\r\n  password: '',\r\n  passwordConfirmation: ''\r\n}\r\ntype State = Readonly<typeof initialState>\r\nclass SignUp extends React.Component<any, State>{\r\n\r\n  readonly state: State = initialState;\r\n\r\n  onChange = (key: keyof State, value: string) => {\r\n    const newState = {}\r\n    newState[key] = value\r\n    this.setState(newState)\r\n  }\r\n\r\n  submit = async () => {\r\n    const { account, password, passwordConfirmation } = this.state\r\n    try {\r\n      await axios.post('sign_up/user', {\r\n        account,\r\n        password,\r\n        password_confirmation: passwordConfirmation\r\n      })\r\n      console.log('成功！');\r\n      this.props.history.push('/')// 没用constructor(props)，为什么能调用到history\r\n    } catch (e) {\r\n      console.log(e.response.data.errors)\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    const { account, password, passwordConfirmation } = this.state\r\n    return (\r\n      <div className=\"SignUp\" id=\"SignUp\">\r\n        <h1>番茄土豆注册</h1>\r\n        <br />\r\n        <Input\r\n          placeholder=\"请输入您的用户名\"\r\n          prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n          value={account}\r\n          onChange={(e) => this.onChange('account', e.target.value)}\r\n        />\r\n        <Input.Password\r\n          value={password}\r\n          placeholder=\"请输入您的密码\"\r\n          onChange={(e) => this.onChange('password', e.target.value)} />\r\n        <Input.Password\r\n          value={passwordConfirmation}\r\n          placeholder=\"请再次输入您的密码\"\r\n          onChange={(e) => this.onChange('passwordConfirmation', e.target.value)} />\r\n        <Button type=\"primary\" className=\"signUpButton\" onClick={this.submit}>注册</Button>\r\n        <p>如果你有账号，请立即<Link to=\"/login\">登录</Link></p>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default SignUp;","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport Home from './components/Home/Home'\r\nimport Login from './components/Login/Login'\r\nimport SignUp from './components/SignUp/SignUp'\r\nimport {Router, Route} from \"react-router-dom\";\r\nimport history from './config/history'\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <Router history={history}>\r\n      <div className=\"App\">\r\n        <Route exact path=\"/\" component={Home} />\r\n        <Route path=\"/login\" component={Login} />\r\n        <Route path=\"/signUp\" component={SignUp} />\r\n      </div>\r\n    </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport store from './redux/store'\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}