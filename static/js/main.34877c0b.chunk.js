(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{391:function(e,t,n){e.exports=n.p+"static/media/logo.01fc1791.png"},398:function(e,t,n){e.exports=n(937)},408:function(e,t,n){},409:function(e,t,n){},419:function(e,t,n){},484:function(e,t,n){},485:function(e,t,n){},491:function(e,t,n){},494:function(e,t,n){},495:function(e,t,n){},600:function(e,t,n){},602:function(e,t,n){},603:function(e,t,n){},912:function(e,t,n){},913:function(e,t,n){},924:function(e,t,n){},933:function(e,t,n){},936:function(e,t,n){},937:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),c=n.n(o),s=n(33),i=n(113),u=n(143),l=Object(i.b)({todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TODO":return[t.payload].concat(Object(u.a)(e));case"INIT_TODOS":return t.payload;case"UPDATE_TODOS":return e.map(function(e){return t.payload.id===e.id?t.payload:e});case"EDIT_TODOS":return e.map(function(e){return t.payload===e.id?Object.assign({},e,{editing:!0}):Object.assign({},e,{editing:!1})});default:return e}},tomatoes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TOMATO":return[t.payload].concat(Object(u.a)(e));case"INIT_TOMATOES":return Object(u.a)(t.payload);case"UPDATE_TOMATO":return e.map(function(e){return t.payload.id===e.id?t.payload:e});default:return e}}}),d=Object(i.c)(l),p=(n(408),n(20)),m=n(21),f=n(23),h=n(22),b=n(24),v=(n(409),n(40)),y=(n(410),n(395)),O=n(18),T=n.n(O),g=n(31),j=(n(938),n(237)),E=(n(99),n(12)),k=function(e){return{type:"UPDATE_TODOS",payload:e}},w=(n(417),n(239)),D=(n(419),n(144),n(54)),x=n(382),C=n.n(x),N=n(45),_="";_="/tomato-clock";var A=Object(N.a)({basename:_}),I=C.a.create({baseURL:"https://gp-server.hunger-valley.com/",headers:{"t-app-id":"DyAShocuh1yeoTr5J7STq9Nf","t-app-secret":"BRLL72sYYcJ4L75BMWQ2zGX8"}});I.interceptors.request.use(function(e){var t=localStorage.getItem("x-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},function(e){return console.error(e),Promise.reject(e)}),I.interceptors.response.use(function(e){return e.headers["x-token"]&&localStorage.setItem("x-token",e.headers["x-token"]),e},function(e){return 401===e.response.status&&(console.log("\u91cd\u5b9a\u5411"),A.push("/login")),Promise.reject(e)});var M,S=I,Y={description:""},U=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state=Y,n.postTodo=Object(g.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.post("todos",{description:n.state.description});case 3:t=e.sent,n.props.addTodo(t.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:n.setState({description:""});case 11:case"end":return e.stop()}},e,null,[[0,7]])})),n.onKeyUp=function(e){"Enter"===e.key&&""!==n.state.description&&n.postTodo()},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state.description,n=t?a.createElement(E.a,{type:"enter",onClick:this.postTodo}):a.createElement("span",null);return a.createElement("div",{className:"TodoInput",id:"TodoInput"},a.createElement(D.a,{placeholder:"\u6dfb\u52a0\u65b0\u4efb\u52a1",suffix:n,onChange:function(t){return e.setState({description:t.target.value})},onKeyUp:this.onKeyUp,value:t}))}}]),t}(a.Component),B={addTodo:function(e){return{type:"ADD_TODO",payload:e}}},H=Object(s.b)(function(e,t){return Object(v.a)({},t)},B)(U),P=(n(482),n(396)),W=(n(484),n(4)),K=n.n(W),L=(n(485),function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).myRef=r.a.createRef(),n.onKeyUp=function(e){"Enter"===e.key&&""!==n.state.editText&&n.updateTodos({description:n.state.editText})},n.onBlur=function(){n.updateTodos({description:n.state.editText})},n.updateTodos=function(){var e=Object(g.a)(T.a.mark(function e(t){var a;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.completed&&(t.completed_at=new Date),e.prev=1,e.next=4,S.put("todos/".concat(n.props.id),t);case 4:a=e.sent,n.props.updateTodos(a.data.resource),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),n.state={editText:n.props.editText},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.myRef.current&&this.myRef.current.focus()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"TodoItemInput",id:"TodoItemInput"},r.a.createElement("input",{type:"text",ref:this.myRef,value:this.state.editText,onChange:function(t){return e.setState({editText:t.target.value})},onKeyUp:this.onKeyUp,onBlur:this.onBlur}))}}]),t}(a.Component)),R={updateTodos:k},F=Object(s.b)(function(e,t){return Object(v.a)({},t)},R)(L),J=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).updateTodos=function(){var e=Object(g.a)(T.a.mark(function e(t){var a;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.completed&&(t.completed_at=new Date),e.prev=1,e.next=4,S.put("todos/".concat(n.props.id),t);case 4:a=e.sent,n.props.updateTodos(a.data.resource),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),n.onDoubleClick=function(){n.props.editTodos(n.props.id)},n.state={editText:n.props.description,id:n.props.id},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement("div",{className:"editing"},r.a.createElement(F,{editText:this.props.description,id:this.state.id}),r.a.createElement(E.a,{className:"icon",type:"enter",onClick:function(){return e.updateTodos({description:e.state.editText})}}),r.a.createElement(E.a,{className:"icon",type:"delete",theme:"filled",onClick:function(t){return e.updateTodos({deleted:!0})}})),n=r.a.createElement("div",{className:"displaying"},r.a.createElement("div",{className:"text",onDoubleClick:this.onDoubleClick},this.props.description),r.a.createElement(E.a,{className:"icon",type:"delete",theme:"filled",onClick:function(t){return e.updateTodos({deleted:!0})}})),a=K()({TodoItem:!0,editing:this.props.editing,completed:this.props.completed});return r.a.createElement("div",{className:a,id:"TodoItem"},r.a.createElement(P.a,{onChange:function(t){return e.updateTodos({completed:t.target.checked})},checked:this.props.completed}),this.props.editing?t:n)}}]),t}(a.Component),z={editTodos:function(e){return{type:"EDIT_TODOS",payload:e}},updateTodos:k},q=Object(s.b)(function(e,t){return Object(v.a)({},t)},z)(J),G=w.a.Panel,Q=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return a.createElement("div",{className:"Todos",id:"Todos"},a.createElement(H,null),a.createElement("div",{className:"todoLists"},this.noCompletedTodos.map(function(e){return a.createElement(q,Object.assign({key:e.id},e))}),a.createElement(w.a,{defaultActiveKey:[],className:"showCompleted"},a.createElement(G,{header:"\u6700\u8fd1\u5b8c\u6210\u7684\u4efb\u52a1",key:"1"},this.recentCompletedTodos.map(function(e){return a.createElement(q,Object.assign({key:e.id},e))})))))}},{key:"noDeletedTodos",get:function(){return this.props.todos.filter(function(e){return!e.deleted})}},{key:"noCompletedTodos",get:function(){return this.noDeletedTodos.filter(function(e){return!e.completed})}},{key:"CompletedTodos",get:function(){return this.noDeletedTodos.filter(function(e){return e.completed})}},{key:"recentCompletedTodos",get:function(){return this.CompletedTodos.filter(function(e,t){return t<5})}}]),t}(a.Component),X=Object(s.b)(function(e,t){return Object(v.a)({todos:e.todos},t)})(Q),$=(n(491),n(98),n(38)),V=(n(492),n(394)),Z=(n(494),function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).state={countDown:n.props.timer},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;M=setInterval(function(){var t=e.state.countDown;e.setState({countDown:t-1e3}),document.title="".concat(e.countDown," \u756a\u8304\u949f"),t<1e3&&(document.title="\u756a\u8304\u949f",e.props.onFinish(),clearInterval(M))},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(M)}},{key:"render",value:function(){var e=1-this.state.countDown/this.props.duration;return r.a.createElement("div",{className:"CountDown",id:"CountDown"},r.a.createElement("span",null,this.countDown),r.a.createElement("div",{className:"process",style:{width:"".concat(100*e,"%")}}))}},{key:"countDown",get:function(){var e=Math.floor(this.state.countDown/1e3/60),t=Math.floor(this.state.countDown/1e3%60);return(e>9?e:"0"+e)+" : "+(t>9?t:"0"+t)}}]),t}(a.Component)),ee=(n(495),V.a.confirm),te=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).onFinish=function(){n.forceUpdate()},n.abortTomato=Object(g.a)(T.a.mark(function e(){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.updateTomato({aborted:!0}),document.title="\u756a\u8304\u949f";case 2:case"end":return e.stop()}},e)})),n.updateTomato=function(){var e=Object(g.a)(T.a.mark(function e(t){var a;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.put("tomatoes/".concat(n.props.unfinishedTomato.id),t);case 3:a=e.sent,n.props.updateTomato(a.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),n.showConfirm=function(){ee({title:"\u60a8\u76ee\u524d\u6b63\u5728\u4e00\u4e2a\u756a\u8304\u5de5\u4f5c\u65f6\u95f4\u4e2d\uff0c\u8981\u653e\u5f03\u8fd9\u4e2a\u756a\u8304\u5417\uff1f",onOk:function(){n.abortTomato()},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"})},n.state={description:""},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"onKeyUp",value:function(e){"Enter"===e.key&&""!==this.state.description&&(this.updateTomato({description:this.state.description,ended_at:new Date}),this.setState({description:""}))}},{key:"render",value:function(){var e,t=this;if(void 0===this.props.unfinishedTomato)e=r.a.createElement($.a,{className:"startTomatoButton",onClick:this.props.startTomato},"\u5f00\u59cb\u756a\u8304");else{var n=Date.parse(this.props.unfinishedTomato.started_at),a=this.props.unfinishedTomato.duration,o=(new Date).getTime();if(o-n>a)e=r.a.createElement("div",{className:"countDownWrapper"},r.a.createElement(D.a,{value:this.state.description,placeholder:"\u8bf7\u8f93\u5165\u4f60\u521a\u521a\u5b8c\u6210\u7684\u4efb\u52a1",onChange:function(e){return t.setState({description:e.target.value})},onKeyUp:function(e){return t.onKeyUp(e)}}),r.a.createElement(E.a,{className:"abort",type:"close-circle",onClick:this.showConfirm}));else if(o-n<a){var c=a-(o-n);e=r.a.createElement("div",{className:"countDownWrapper"},r.a.createElement(Z,{timer:c,onFinish:this.onFinish,duration:a}),r.a.createElement(E.a,{className:"abort",type:"close-circle",onClick:this.showConfirm}))}}return r.a.createElement("div",{className:"TomatoAction",id:"TomatoAction"},e)}}]),t}(a.Component),ne=n(44),ae=(n(600),function(e){var t=new Date(new Date(e.started_at).getTime()+15e5);return r.a.createElement("div",{className:"TomatoItem"},r.a.createElement("span",{className:"timeRange"},Object(ne.format)(e.started_at,"HH : mm")," - ",Object(ne.format)(t,"HH : mm")),r.a.createElement("span",{className:"description"},e.description))}),re=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.dates.map(function(t){var n=e.props.finishedTomatoes[t];return r.a.createElement("div",{key:t,className:"dailyTomatoes"},r.a.createElement("div",{className:"title"},r.a.createElement("span",{className:"dateTime"},Object(ne.format)(t,"M\u6708DD\u65e5")),r.a.createElement("span",{className:"finishedCount"},"\u5b8c\u6210\u4e86",n.length,"\u4e2a\u756a\u8304")),n.map(function(e){return r.a.createElement(ae,Object.assign({key:e.id},e))}))});return r.a.createElement("div",{className:"TomatoList",id:"TomatoList"},t)}},{key:"dates",get:function(){return Object.keys(this.props.finishedTomatoes).sort(function(e,t){return Date.parse(t)-Date.parse(e)}).splice(0,3)}}]),t}(a.Component),oe=n(96),ce=n.n(oe),se=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).startTomato=Object(g.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.post("tomatoes",{duration:15e5});case 3:t=e.sent,n.props.addTomato(t.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Tomatoes",id:"Tomatoes"},r.a.createElement(te,{startTomato:this.startTomato,unfinishedTomato:this.unfinishedTomato,updateTomato:this.props.updateTomato}),r.a.createElement(re,{finishedTomatoes:this.finishedTomatoes}))}},{key:"unfinishedTomato",get:function(){return this.props.tomatoes.filter(function(e){return!e.description&&!e.ended_at&&!e.aborted})[0]}},{key:"finishedTomatoes",get:function(){var e=this.props.tomatoes.filter(function(e){return e.description&&e.ended_at&&!e.aborted});return ce.a.groupBy(e,function(e){return Object(ne.format)(e.started_at,"YYYY-MM-D")})}}]),t}(a.Component),ie={addTomato:function(e){return{type:"ADD_TOMATO",payload:e}},updateTomato:function(e){return{type:"UPDATE_TOMATO",payload:e}}},ue=Object(s.b)(function(e,t){return Object(v.a)({tomatoes:e.tomatoes},t)},ie)(se),le=(n(602),n(603),n(387)),de=n.n(le),pe=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"lastWeekDate",value:function(){for(var e=(new Date).getTime(),t=[],n=0;n<7;n++){var a=e-864e5*(6-n);t[n]=Object(ne.format)(new Date(a),"YYYY-MM-D")}return t}},{key:"finishedNum",value:function(){for(var e=[],t=0;t<7;t++){var n=this.props.data.hasOwnProperty(this.lastWeekDate()[t]);e[t]=n?this.props.data[this.lastWeekDate()[t]].length:0}return e}},{key:"getOption",value:function(){return{tooltip:{},title:{text:this.props.title,textStyle:{color:"#666",fontWeight:"normal",lineHeight:40}},xAxis:{show:!0,data:this.lastWeekDate()},yAxis:{show:!0,max:10},grid:{bottom:30,left:30,right:10},series:[{name:"\u5b8c\u6210\u6570\u91cf",type:"bar",barMinHeight:1,data:this.finishedNum(),itemStyle:{color:"rgba(165, 42 ,42, 0.4)"},emphasis:{itemStyle:{color:"#ed7579"}}}]}}},{key:"render",value:function(){return r.a.createElement("div",{className:"Polygon",id:"Polygon"},r.a.createElement(de.a,{className:"echart",option:this.getOption(),notMerge:!0,lazyUpdate:!0,theme:"theme_name"}))}}]),t}(a.Component),me=(n(910),n(238)),fe=(n(912),function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).updateTodos=function(){var e=Object(g.a)(T.a.mark(function e(t){var a;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.put("todos/".concat(n.props.id),t);case 3:a=e.sent,n.props.updateTodos(a.data.resource),console.log(a.data.resource),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t,n,a=this;return"finished"===this.props.itemType?(n=this.props.updated_at,e="HH:mm",t=r.a.createElement("div",{className:"action"},r.a.createElement("span",{onClick:function(){return a.updateTodos({completed:!1})}},"\u6062\u590d"),r.a.createElement("span",{onClick:function(){return a.updateTodos({deleted:!0})}},"\u5220\u9664"))):"deleted"===this.props.itemType&&(n=this.props.created_at,e="YYYY-MM-D",t=r.a.createElement("div",{className:"action"},r.a.createElement("span",{onClick:function(){return a.updateTodos({deleted:!1})}},"\u6062\u590d"))),r.a.createElement("div",{className:"TodoHistoyTodoItem",id:"TodoHistoyTodoItem"},r.a.createElement("span",{className:"timeRange"},Object(ne.format)(n,e)),r.a.createElement("span",{className:"description"},this.props.description),r.a.createElement("div",null,t))}}]),t}(a.Component)),he={updateTodos:k},be=Object(s.b)(function(e,t){return Object(v.a)({},t)},he)(fe),ve=(n(913),me.a.TabPane),ye=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"getWeekday",value:function(e){var t=e;return["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"][new Date(Date.parse(t.replace(/-/g,"/"))).getDay()]}},{key:"render",value:function(){var e=this,t=this.finishedDates.map(function(t){return r.a.createElement("div",{key:t,className:"dailyHistory"},r.a.createElement("div",{className:"title"},r.a.createElement("span",{className:"dateTime"},t),r.a.createElement("span",{className:"weeklyDate"},e.getWeekday(t)),r.a.createElement("span",{className:"count"},"\u5b8c\u6210\u4e86",e.dailyFinishedTodos[t].length,"\u4e2a\u4efb\u52a1")),r.a.createElement("div",{className:"items"},e.dailyFinishedTodos[t].map(function(e){return r.a.createElement(be,Object.assign({key:e.id},e,{itemType:"finished"}))})))}),n=this.deletedTodos.map(function(e){return r.a.createElement(be,Object.assign({key:e.id},e,{itemType:"deleted"}))});return r.a.createElement("div",{className:"TodoHistory",id:"TodoHistory"},r.a.createElement(me.a,{defaultActiveKey:"1"},r.a.createElement(ve,{tab:"\u5df2\u5b8c\u6210\u7684\u4efb\u52a1",key:"1"},t),r.a.createElement(ve,{tab:"\u5df2\u5220\u9664\u7684\u4efb\u52a1",key:"2"},n)))}},{key:"finishedTodos",get:function(){return this.props.todos.filter(function(e){return e.completed&&!e.deleted})}},{key:"dailyFinishedTodos",get:function(){return ce.a.groupBy(this.finishedTodos,function(e){return Object(ne.format)(e.updated_at,"YYYY-MM-D")})}},{key:"finishedDates",get:function(){return Object.keys(this.dailyFinishedTodos).sort(function(e,t){return Date.parse(t)-Date.parse(e)})}},{key:"deletedTodos",get:function(){return this.props.todos.filter(function(e){return e.deleted})}}]),t}(a.Component),Oe=Object(s.b)(function(e,t){return Object(v.a)({todos:e.todos},t)})(ye),Te=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Statistics",id:"Statistics"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(pe,{data:this.dailyTomatoes,title:"\u8fd1\u671f\u756a\u8304\u5b8c\u6210\u6982\u51b5"})),r.a.createElement("li",null,r.a.createElement(pe,{data:this.dailyTodos,title:"\u8fd1\u671f\u4efb\u52a1\u5b8c\u6210\u6982\u51b5"}))),r.a.createElement(Oe,null))}},{key:"finishedTodos",get:function(){return this.props.todos.filter(function(e){return e.completed&&!e.deleted})}},{key:"dailyTodos",get:function(){return ce.a.groupBy(this.finishedTodos,function(e){return Object(ne.format)(e.updated_at,"YYYY-MM-D")})}},{key:"finishedTomatoes",get:function(){return this.props.tomatoes.filter(function(e){return!e.aborted&&e.ended_at})}},{key:"dailyTomatoes",get:function(){return ce.a.groupBy(this.finishedTomatoes,function(e){var t=new Date(new Date(e.started_at).getTime()+15e5);return Object(ne.format)(t,"YYYY-MM-D")})}}]),t}(a.Component),ge=Object(s.b)(function(e,t){return Object(v.a)({todos:e.todos,tomatoes:e.tomatoes},t)})(Te),je=(n(924),n(391)),Ee=n.n(je),ke=a.createElement(j.b,null,a.createElement(j.b.Item,{key:"1",onClick:function(){localStorage.setItem("x-token",""),A.push("/login")}},a.createElement(E.a,{type:"user"}),"\u767b\u51fa")),we={user:{account:""}},De=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state=we,n.getMe=Object(g.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.get("me");case 2:t=e.sent,n.setState({user:t.data});case 4:case"end":return e.stop()}},e)})),n.getTodos=Object(g.a)(T.a.mark(function e(){var t,a;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.get("todos");case 3:t=e.sent,a=t.data.resources.map(function(e){return Object.assign({},e,{editing:!1})}),n.props.initTodos(a),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),n.getTomatoes=Object(g.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.get("tomatoes");case 3:t=e.sent,n.props.initTomatoes(t.data.resources),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){var e=Object(g.a)(T.a.mark(function e(){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMe();case 2:return e.next=4,this.getTodos();case 4:return e.next=6,this.getTomatoes();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.createElement("div",{className:"Home",id:"Home"},a.createElement("header",null,a.createElement("div",{className:"logo"},a.createElement("img",{src:Ee.a,alt:""}),a.createElement("span",null,"\u756a\u8304\u571f\u8c46")),a.createElement(y.a,{overlay:ke,className:"Dropdown"},a.createElement("span",null,this.state.user.account,a.createElement(E.a,{type:"down",style:{marginLeft:8}})))),a.createElement("main",null,a.createElement(ue,null),a.createElement(X,null)),a.createElement(ge,null))}}]),t}(a.Component),xe={initTodos:function(e){return{type:"INIT_TODOS",payload:e}},initTomatoes:function(e){return{type:"INIT_TOMATOES",payload:e}}},Ce=Object(s.b)(function(e,t){return Object(v.a)({todos:e.todos},t)},xe)(De),Ne=n(141),_e=(n(933),{account:"",password:""}),Ae=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state=_e,n.onChange=function(e,t){var a={};a[e]=t,n.setState(a)},n.submit=Object(g.a)(T.a.mark(function e(){var t,a,r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.account,r=t.password,e.prev=1,e.next=4,S.post("sign_in/user",{account:a,password:r});case 4:console.log("\u6210\u529f\uff01"),n.props.history.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.errors);case 11:case"end":return e.stop()}},e,null,[[1,8]])})),n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.account,r=t.password;return a.createElement("div",{className:"Login",id:"Login"},a.createElement("h1",null,"\u756a\u8304\u571f\u8c46\u767b\u5f55"),a.createElement("br",null),a.createElement(D.a,{placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d",prefix:a.createElement(E.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),value:n,onChange:function(t){e.onChange("account",t.target.value)}}),a.createElement(D.a.Password,{value:r,placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801",onChange:function(t){e.onChange("password",t.target.value)}}),a.createElement($.a,{type:"primary",className:"loginButton",onClick:this.submit},"\u767b\u5f55"),a.createElement("p",null,"\u5982\u679c\u4f60\u6ca1\u6709\u8d26\u53f7\uff0c\u8bf7\u7acb\u5373",a.createElement(Ne.a,{to:"/signUp"},"\u6ce8\u518c")))}}]),t}(a.Component),Ie=(n(936),{account:"",password:"",passwordConfirmation:""}),Me=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state=Ie,n.onChange=function(e,t){var a={};a[e]=t,n.setState(a)},n.submit=Object(g.a)(T.a.mark(function e(){var t,a,r,o;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.account,r=t.password,o=t.passwordConfirmation,e.prev=1,e.next=4,S.post("sign_up/user",{account:a,password:r,password_confirmation:o});case 4:console.log("\u6210\u529f\uff01"),n.props.history.push("/"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.response.data.errors),e.t0.response.data.errors.account?alert("\u8be5\u8d26\u53f7\u5df2\u5b58\u5728"):e.t0.response.data.errors.password_confirmation&&alert("\u4e24\u6b21\u5bc6\u7801\u4e0d\u4e00\u81f4");case 12:case"end":return e.stop()}},e,null,[[1,8]])})),n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.account,r=t.password,o=t.passwordConfirmation;return a.createElement("div",{className:"SignUp",id:"SignUp"},a.createElement("h1",null,"\u756a\u8304\u571f\u8c46\u6ce8\u518c"),a.createElement("br",null),a.createElement(D.a,{placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d",prefix:a.createElement(E.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),value:n,onChange:function(t){return e.onChange("account",t.target.value)}}),a.createElement(D.a.Password,{value:r,placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801",onChange:function(t){return e.onChange("password",t.target.value)}}),a.createElement(D.a.Password,{value:o,placeholder:"\u8bf7\u518d\u6b21\u8f93\u5165\u60a8\u7684\u5bc6\u7801",onChange:function(t){return e.onChange("passwordConfirmation",t.target.value)}}),a.createElement($.a,{type:"primary",className:"signUpButton",onClick:this.submit},"\u6ce8\u518c"),a.createElement("p",null,"\u5982\u679c\u4f60\u6709\u8d26\u53f7\uff0c\u8bf7\u7acb\u5373",a.createElement(Ne.a,{to:"/login"},"\u767b\u5f55")))}}]),t}(a.Component),Se=n(97),Ye=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(Se.b,{history:A},r.a.createElement("div",{className:"App"},r.a.createElement(Se.a,{exact:!0,path:"/",component:Ce}),r.a.createElement(Se.a,{path:"/login",component:Ae}),r.a.createElement(Se.a,{path:"/signUp",component:Me})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(s.a,{store:d},r.a.createElement(Ye,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[398,1,2]]]);
//# sourceMappingURL=main.34877c0b.chunk.js.map